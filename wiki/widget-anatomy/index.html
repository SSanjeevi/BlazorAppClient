<!DOCTYPE html><html lang="en"><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','< your container ID >');</script><link rel="shortcut icon" href="/content/favicon.ico"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><link href="/styles/theme.css" rel="stylesheet" type="text/css"><script src="/scripts/vendor.js"></script><script src="/scripts/theme.js"></script><title>Wiki: Widget anatomy - TNPSC Quickies</title><meta name="description" content="Free online TNPSC exam coaching"><meta name="keywords" content="TNPSC coaching, Free online government coaching, Free online TNPSC Coaching"><meta name="author" content="Bala Subramanian"><link href="/styles/styles.css" rel="stylesheet" type="text/css"><link href="/wiki/widget-anatomy/styles.css" rel="stylesheet" type="text/css"><meta property="og:type" content="article"><meta property="og:site_name" content="TNPSC Quickies"><meta property="og:title" content="Wiki: Widget anatomy"><meta property="og:description" content="Free online TNPSC exam coaching"><meta property="og:url" content="https://paperbits.io/wiki/widget-anatomy"><script>window.intercomSettings = { app_id: "< your App ID >" };</script><script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/l560nd3j';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();</script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=< your container ID >" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><main><section><div class="jwkfwtfrsv jwkfwtfrsv-md jwkfwtfrsv-xl jwkfwtfrsv-sm jwkfwtfrsv-lg"><div class="wgmthhjvez wgmthhjvez-md"><div class="inline-block"><a href="/"><img class="content picture picture-default" src="/content/tnpquickies.jpeg" alt="Picture" width="190" height="75" style="width:190px;height:75px"></a></div><div class="collapsible collapsible-panel"><div class="backdrop"></div><div class="collapsible-content zskbvpopsf zskbvpopsf-xl"><nav class="menu menu-default"><div class="menu menu-horizontal"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/youtubevideos" class="nav-link">Youtube videos</a></li><li class="nav-item"><a href="/blog" class="nav-link">Blog</a></li><li class="nav-item"><a href="/contactus" class="nav-link">Contact Us</a></li><li class="nav-item"><a href="/about" class="nav-link">About</a></li></ul></div></nav><button class="collapsible-panel-close" aria-label="Toggle" data-toggle="modal"><i class="icon icon-simple-remove"></i></button></div><button class="collapsible-panel-open" aria-label="Toggle" data-toggle="modal"><i class="icon icon-menu-8"></i></button></div></div></div></section><section class="oevfwkwgiz oevfwkwgiz-xl"><div class="dcpmrieueo dcpmrieueo-md dcpmrieueo-xl dcpmrieueo-sm dcpmrieueo-lg"><div class="bfyoqighbi bfyoqighbi-md bfyoqighbi-xl"><nav class="menu menu-default"><div class="menu menu-vertical"><ul class="nav"><li class="nav-item"><a href="/contactus" class="nav-link">Getting started</a></li><li class="nav-item collapsible"><a href="/wiki/widget-anatomy" class="nav-link nav-link-active" data-toggle="collapsible">Widget anatomy</a><ul class="nav"><li class="nav-item"><a href="#65gjF" class="nav-link">What is widget?</a></li><li class="nav-item"><a href="#22nPX" class="nav-link">@Component decorator</a></li><li class="nav-item"><a href="#uGTRK" class="nav-link">Lifecycle hooks</a></li><li class="nav-item"><a href="#nlHGf" class="nav-link">Dependency injection</a></li><li class="nav-item"><a href="#AZkSo" class="nav-link">Data contract, Model, ModelBinder, ViewModelBinder</a></li><li class="nav-item"><a href="#ysN0U" class="nav-link">Design-time, publish-time, run-time</a></li></ul></li><li class="nav-item"><a href="/wiki/forms" class="nav-link">Forms module</a></li><li class="nav-item"><a href="/wiki/build-system" class="nav-link">Build system</a></li><li class="nav-item"><a href="/wiki/styles" class="nav-link">Styles module</a></li></ul></div></nav></div><div class="ybzuxpqczk ybzuxpqczk-md ybzuxpqczk-xl"><main><section><div class="vfkzttvgoj"><div class="ielplpinko"><div class="block ProseMirror"><h1 id="ht8SM">Widget anatomy</h1><h2 id="65gjF">What is widget?</h2><p>A widget in Paperbits is a UI component consisting of a view template and view model behind it. Depending on the UI framework you use (Knockout, Vue, Angular or the other), both template syntax and view model implementation may vary.</p><p>In the simplest form the parts of a widget would look like the following:</p><p><b>HTML (template)</b></p><pre>&lt;h1&gt;My component&lt;/h1&gt;</pre><p><b>Typescript (view model)</b></p><pre>class MyComponent { }</pre><p>... and used like this:</p><pre>&lt;my-component&gt;&lt;/my-component&gt;</pre><h2 id="22nPX">@Component decorator</h2><p>Besides binding a view model to its template, this decorator simplifies registration of a component in UI framework. The usage of the decorator is straightforward and looks similarly for different UI frameworks:</p><pre>@Component({<br>    selector: "my-component",<br>    template: "&lt;h1&gt;My component&lt;/h1&gt;"<br>})<br>export class MyComponent {<br>    constructor(someService: SomeService) { ... }<br>}</pre><p>The only difference is the path from where it gets imported:</p><p><b>Knockout</b></p><pre>import { Component } from "@paperbits/core/ko/component";</pre><p><b>Vue</b></p><pre>import { Component } from "@paperbits/core/vue/component";</pre><p><b>Angular</b></p><pre>import { Component } from "@angular/core/component";</pre><h2 id="uGTRK">Lifecycle hooks</h2><p>Now, when you know how to declare a component, itâ€™s good to know about a few hooks responsible for the lifecycle of the component.</p><h3 id="mLdtb">Initialization methods</h3><p>They are invoked right after a component instance was created. All the input parameters (see below) are available at this time.</p><p><b>Knockout</b></p><pre>@OnMounted()<br>public async initialize(): Promise&lt;void&gt; {<br>   // Your initialization code<br>}</pre><p><b>Vue</b></p><pre>@OnMounted()<br>public async initialize(): Promise&lt;void&gt; {<br>   // Your initialization code<br>}</pre><p><b>Angular</b></p><pre>public async ngOnInit(): Promise&lt;void&gt; {<br>   // Your initialization code<br>}</pre><h3 id="F4GCr">Input parameters</h3><p>This is data passed into a component from its host.</p><p><b>Knockout</b></p><pre>@Param()<br>public message: string;</pre><p>Binding the parameter:</p><pre>&lt;component [message]="message"&gt;&lt;/component&gt;</pre><p><b>Vue</b></p><pre>@Prop()<br>public message: string;</pre><p>Binding the parameter:</p><pre>&lt;component v-bind:message="message"&gt;&lt;/component&gt;</pre><p><b>Angular</b></p><pre>@Input()<br>public message: string;</pre><p>Binding the parameter:</p><pre>&lt;component params="onChange: doSomething"&gt;&lt;/component&gt;</pre><h3 id="LoSPC">Events</h3><p>These are callbacks used to notify the component host when needed.</p><p><b>Knockout</b></p><pre>@Event()<br>public onChange: (model: ButtonModel) =&gt; void;</pre><p>Emitting the event:</p><pre>this.onChange(model);</pre><p>Subscribing for the event:</p><pre>&lt;component v-on:onChange="doSomething"&gt;&lt;/component&gt;</pre><p><b>Vue</b></p><pre>@Event()<br>public onChange: (model: ButtonModel) =&gt; void;</pre><p>Emitting the event:</p><pre>this.onChange(model);</pre><p>Subscribing for the event:</p><pre>&lt;component v-on:onChange="doSomething"&gt;&lt;/component&gt;</pre><p><b>Angular</b></p><pre>@Output()<br>public onChange: EventEmitter&lt;ButtonModel&gt;;</pre><p>Emitting the event:</p><pre>this.onChange.emit(model);</pre><p>Subscribing for the event:</p><pre>&lt;component (onChange)="doSomething()"&gt;&lt;/component&gt;</pre><h3 id="vV0kv">Cleanup methods</h3><p>They are invoked right before component instance gets destroyed.</p><p><b>Knockout</b></p><pre>@OnDestroyed()<br>public async dispose(): Promise&lt;void&gt; {<br>   // Your cleanup code<br>}</pre><p><b>Vue</b></p><pre>@OnDestroyed()<br>public async dispose(): Promise&lt;void&gt; {<br>   // Your cleanup code<br>}</pre><p><b>Angular</b></p><pre>public async ngOnDestroy(): Promise&lt;void&gt; {<br>   // Your cleanup code<br>}</pre><p></p><h2 id="nlHGf">Dependency injection</h2><p>For Inversion of Control (IoC), by default, we use <a href="http://inversify.io/">InversifyJS </a>which is greatly suitable for applications powered by TypeScript. Though, you're welcome to replace it with any other you like.</p><p>If you went through "Getting started" tutorial, you have probably seen in startup.develop.ts file how we import and instantiate a container:</p><pre>@import { InversifyInjector } from "@paperbits/common/injection";<br>cost injector = new InversifyInjector();</pre><p>... and register components:</p><pre>injector.bind("myComponent", MyComponent);</pre><p>... or modules:</p><pre>injector.bindModule(new CoreModule());</pre><p>Then, when the container is ready, we can resolve components:</p><pre>const instance = injector.resolve("myComponent");</pre><h2 id="AZkSo">Data contract, Model, ModelBinder, ViewModelBinder</h2><p><b>Data contract</b> - is an interface for a raw JSON data object that represents configuration of a widget or a service (and which gets usually stored on the backend). For example:</p><pre>interface PictureContract {<br>    /**<br>     * Key of a permalink referencing a source of the picture.<br>     */<br>    sourceKey: string;<br><br>    /**<br>     * Caption on the picture, used also as alternative text.<br>     */<br>    caption: string; // "blank"<br>}</pre><p><b>Model</b> - is a class that represents a structure fulfilled with data from one or more Contracts and other sources.</p><pre>class PictureModel {<br>    sourceKey: string;<br>    caption: string;<br>}</pre><p><b>View model </b>- is a structure that represents the component in specific UI framework. For example:</p><p><b>Knockout</b></p><pre>@Component({ selector: "picture" })<br>class PictureViewModel {<br>    sourceUrl: KnockoutObservable&lt;string&gt;; // Note that here source key was replaced by real URL.<br>    caption:  KnockoutObservable&lt;string&gt;;<br>}</pre><pre>&lt;img data-bind="attr: { src: sourceUrl, alt: caption }" /&gt;</pre><p><b>Vue</b></p><pre>@Component({ selector: "picture" })<br>class PictureViewModel {<br>    sourceUrl: string;<br>    caption: string;<br>}</pre><pre>&lt;img v-bind:src="sourceUrl" v-bind:alt="caption" &gt;</pre><p>As you might have guessed, the transformation of the data contract into a model is done by ModelBinder, and model data flows into a view model through ViewModelBinder (which knows the specifics of UI framework).</p><h2 id="ysN0U">Design-time, publish-time, run-time</h2><p>In Paperbits there are three clearly distinguished scopes:</p><p><b>Design-time</b> - This is the execution scope where components required for editing content are running.</p><p><b>Publish-time</b> - The scope in which static website and resources are being generated.</p><p><b>Run-time</b> - Kicks in when the published website is loaded into browser.</p><p>Components of each scope run independently and do not know of each other. They have separate DI containers, their own configurations, lifecycle, etc. They may even be powered by different UI frameworks.</p><p>In the demo project you can see respective files:</p><p><b>startup.[scope].ts </b>- a script where the components get bootstrapped;</p><p><b>config.[scope].json</b> - configuration for a scope;</p><p><b>webpack.[scope].js</b> - webpack definition for building scoped components;</p></div></div></div></section></main></div></div></section><section><div class="pagpkkxixn pagpkkxixn-md pagpkkxixn-xl pagpkkxixn-sm pagpkkxixn-lg"><div class="cnpyyklfvm cnpyyklfvm-md"><div class="block ProseMirror"><p class="text text-md-align-center text text-xl-align-center text text-align-center">Copyright Â© 2020 TNPSC Quickies. All rights reserved.</p></div></div></div></section></main></body></html>